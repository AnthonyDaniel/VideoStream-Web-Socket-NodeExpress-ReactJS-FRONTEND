{"version":3,"sources":["reducers/room-reducer.js","reducers/audio-reducer.js","reducers/video-reducer.js","reducers/index.js","store.js","components/Home.js","containers/HomePage.js","containers/MediaContainer.js","components/ToggleFullScreen.js","components/Communication.js","containers/CommunicationContainer.js","containers/RoomPage.js","serviceWorker.js","index.js","components/NotFound.js","assets/videollamada.webp"],"names":["updateRooms","state","action","type","Set","room","setAudio","audio","setVideo","video","reducers","combineReducers","rooms","roomReducer","videoReducer","audioReducer","persistedState","localStorage","getItem","JSON","parse","store","createStore","subscribe","setItem","stringify","getState","connect","props","className","hidden","name","value","roomId","onChange","handleChange","pattern","maxLength","required","autoFocus","title","Link","to","defaultRoomId","length","map","key","src","Pin","placeholder","HomePage","String","Date","setHours","bind","e","this","setState","target","Component","contextTypes","router","PropTypes","object","MediaBridge","bridge","user","onRemoteHangup","onMessage","sendData","setupDataHandlers","setDescription","sendDescription","hangup","init","window","RTCPeerConnection","webkitRTCPeerConnection","media","getUserMedia","then","stream","localVideo","srcObject","localStream","socket","on","undefined","getVideoTracks","stop","emit","message","pc","setRemoteDescription","RTCSessionDescription","createAnswer","catch","handleError","addIceCandidate","RTCIceCandidate","sdpMLineIndex","mlineindex","candidate","msg","dc","send","onmessage","data","console","log","onclose","remoteStream","offer","setLocalDescription","localDescription","close","iceServers","url","onicecandidate","onaddstream","remoteVideo","ondatachannel","channel","peerMediaStream","enabled","getTracks","forEach","track","addTrack","createDataChannel","createOffer","ref","autoPlay","muted","el","document","documentElement","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullScreen","ToggleFullScreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","Communication","xmlns","viewBox","d","fill","onClick","toggleAudio","toggleVideo","handleHangup","onSubmit","handleInput","data-ref","handleInvitation","href","location","CommunicationContainer","sid","full","role","getAudioTracks","dataset","preventDefault","hideAuth","React","dispatch","boo","RoomPage","navigator","mediaDevices","alert","io","addRoom","MediaContainer","ownProps","match","params","Boolean","hostname","render","BrowserRouter","Switch","Route","exact","path","component","Home","Room","class","getElementById","serviceWorker","ready","registration","unregister","error","module","exports"],"mappings":"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","file":"static/js/main.8566c8e6.chunk.js","sourcesContent":["const updateRooms = (state = [], action) => {\r\n  if (action.type === 'ADD_ROOM') {\r\n    return [...new Set([...state, action.room])];\r\n  }\r\n  return state;\r\n};\r\nexport default updateRooms;\r\n","const setAudio = (\r\n    state = true, action\r\n    ) => (\r\n        action.type === 'SET_AUDIO' ? action.audio : state\r\n);\r\nexport default setAudio;\r\n","const setVideo = (\r\n    state = true, action\r\n) => (\r\n    action.type === 'SET_VIDEO' ? action.video : state\r\n);\r\n\r\nexport default setVideo;\r\n","import { combineReducers } from 'redux';\r\n// Reducers\r\nimport roomReducer from './room-reducer';\r\nimport audioReducer from './audio-reducer';\r\nimport videoReducer from './video-reducer';\r\n// Combine Reducers\r\nconst reducers = combineReducers({\r\n  rooms: roomReducer,\r\n  video: videoReducer,\r\n  audio: audioReducer\r\n});\r\nexport default reducers;\r\n","import { createStore } from 'redux';\nimport reducers from './reducers';\n\nconst mapStoreToStorage = () =>\n\tlocalStorage.setItem('reduxState', JSON.stringify(store.getState()));\n\nconst persistedState = localStorage.getItem('reduxState')\n\t? JSON.parse(localStorage.getItem('reduxState'))\n\t: {\n\t\trooms: [],\n\t\tvideo: true,\n\t\taudio: true\n\t};\n\nconst store = createStore(reducers, persistedState);\n\nstore.subscribe(mapStoreToStorage);\n\nexport default store;\n","import React from 'react';\nimport { PropTypes } from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport Pin from '../assets/videollamada.webp'\n\nconst Home = props =>\n  <div className=\"content-fluid\">\n    <div className=\"row\">\n      <div className=\"col-6\" hidden>\n        <h1 className=\"title\">ThonyVideo</h1>\n        <p>Por favor crea un nombre de sala</p>\n        <input type=\"text\" name=\"room\" value={props.roomId} onChange={props.handleChange} pattern=\"^\\w+$\" maxLength=\"10\" required autoFocus title=\"El nombre de la sala solo debe contener letras o números\" />\n        <Link className=\"primary-button\" to={'/r/' + props.roomId}>Unirse</Link>\n        <Link className=\"primary-button\" to={'/r/' + props.defaultRoomId}>Aleatorio</Link>\n        {props.rooms.length !== 0 && <div>Salas usadas recientemente:</div>}\n        {props.rooms.map(room => <Link key={room} className=\"recent-room\" to={'/r/' + room}>{room}</Link>)}\n      </div>\n      <div className=\"col-12\">\n        <div className=\"container-fluid\">\n          <div className=\"row justify-content-center\">\n            <div className=\"col-12 col-sm-7 col-md-6 col-xl-5\">\n              <div className=\"\">\n                <div className=\"container h-100\">\n                  <div className=\"d-flex justify-content-center h-100\">\n                    <div className=\"user_card\">\n                      <div className=\"container-fluid\">\n                        <div className=\"row justify-content-center\">\n                          <div className=\"col-6\">\n                            <img src={Pin} className=\"img-fluid\"></img>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"d-flex justify-content-center form_container mt-0\">\n                        <h4 className=\"text-center title mt-0 pt-0\">ThonyVideo</h4>\n                      </div>\n                      <div className=\"d-flex justify-content-center\">\n                        <br></br>\n                        <div className=\"container-fluid\">\n                          <div className=\"row\">\n                            <div className=\"col-12\">\n                              <input className=\"form-control\" type=\"text\" name=\"room\" value={props.roomId} onChange={props.handleChange} pattern=\"^\\w+$\" maxLength=\"10\" required autoFocus placeholder=\"Conectate a una sala o crea una\" />\n                            </div>\n                            <div className=\"col-12\">\n                              <Link className=\"btn btn-primary btn-block\" to={'/r/' + props.roomId}>Crear o Unirse</Link>\n                            </div>\n                            <div className=\"col-6\" hidden>\n                              <Link className=\"btn btn-primary btn-block\" to={'/r/' + props.defaultRoomId}>Aleatorio</Link>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>;\n\nHome.propTypes = {\n  handleChange: PropTypes.func.isRequired,\n  defaultRoomId: PropTypes.string.isRequired,\n  roomId: PropTypes.string.isRequired,\n  rooms: PropTypes.array.isRequired\n};\n\nconst mapStateToProps = store => ({ rooms: store.rooms });\n\nexport default connect(mapStateToProps)(Home);","import React, { Component } from 'react'\nimport { PropTypes } from 'prop-types';\nimport Home from '../components/Home';\n\nclass HomePage extends Component {\n  constructor(props) {\n    super(props);\n    this.defaultRoomId = String(new Date() - new Date().setHours(0, 0, 0, 0));\n    this.state = { roomId: this.defaultRoomId };\n    this.handleChange = this.handleChange.bind(this);\n  }\n  handleChange(e) {\n    this.setState({ roomId: e.target.value });\n  }\n  render(){\n    return (\n      <Home\n        defaultRoomId={this.defaultRoomId}\n        roomId={this.state.roomId}\n        handleChange={this.handleChange}\n      />\n    );\n  }\n}\n\nHomePage.contextTypes = {\n  router: PropTypes.object\n};\n\nexport default HomePage;","import React, { Component } from 'react';\nimport { PropTypes } from 'prop-types';\n\nclass MediaBridge extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bridge: '',\n      user: ''\n    }\n\n    this.onRemoteHangup = this.onRemoteHangup.bind(this);\n    this.onMessage = this.onMessage.bind(this);\n    this.sendData = this.sendData.bind(this);\n    this.setupDataHandlers = this.setupDataHandlers.bind(this);\n    this.setDescription = this.setDescription.bind(this);\n    this.sendDescription = this.sendDescription.bind(this);\n    this.hangup = this.hangup.bind(this);\n    this.init = this.init.bind(this);\n    this.setDescription = this.setDescription.bind(this);\n\n  }\n  componentWillMount() {\n    // chrome polyfill for connection between the local device and a remote peer\n    window.RTCPeerConnection = window.RTCPeerConnection || window.webkitRTCPeerConnection;\n    this.props.media(this);\n  }\n  componentDidMount() {\n    this.props.getUserMedia\n      .then(stream => this.localVideo.srcObject = this.localStream = stream);\n    this.props.socket.on('message', this.onMessage);\n    this.props.socket.on('hangup', this.onRemoteHangup);\n  }\n  componentWillUnmount() {\n    this.props.media(null);\n    if (this.localStream !== undefined) {\n      this.localStream.getVideoTracks()[0].stop();\n    }\n    this.props.socket.emit('leave');\n  }\n  onRemoteHangup() {\n    this.setState({user: 'host', bridge: 'host-hangup'});\n  }\n  onMessage(message) {\n      if (message.type === 'offer') {\n          // set remote description and answer\n          this.pc.setRemoteDescription(new RTCSessionDescription(message));\n          this.pc.createAnswer()\n            .then(this.setDescription)\n            .then(this.sendDescription)\n            .catch(this.handleError); // An error occurred, so handle the failure to connect\n\n      } else if (message.type === 'answer') {\n          // set remote description\n          this.pc.setRemoteDescription(new RTCSessionDescription(message));\n      } else if (message.type === 'candidate') {\n          // add ice candidate\n          this.pc.addIceCandidate(\n              new RTCIceCandidate({\n                  sdpMLineIndex: message.mlineindex,\n                  candidate: message.candidate\n              })\n          );\n      }\n  }\n  sendData(msg) {\n    this.dc.send(JSON.stringify(msg))\n  }\n  // Set up the data channel message handler\n  setupDataHandlers() {\n      this.dc.onmessage = e => {\n          var msg = JSON.parse(e.data);\n          console.log('received message over data channel:' + msg);\n      };\n      this.dc.onclose = () => {\n        this.remoteStream.getVideoTracks()[0].stop();\n        console.log('The Data Channel is Closed');\n      };\n  }\n  setDescription(offer) {\n    this.pc.setLocalDescription(offer);\n  }\n  // send the offer to a server to be forwarded to the other peer\n  sendDescription() {\n    this.props.socket.send(this.pc.localDescription);\n  }\n  hangup() {\n    this.setState({user: 'guest', bridge: 'guest-hangup'});\n    this.pc.close();\n    this.props.socket.emit('leave');\n  }\n  handleError(e) {\n    console.log(e);\n  }\n  init() {\n    // wait for local media to be ready\n    const attachMediaIfReady = () => {\n      this.dc = this.pc.createDataChannel('chat');\n      this.setupDataHandlers();\n      console.log('attachMediaIfReady')\n      this.pc.createOffer()\n        .then(this.setDescription)\n        .then(this.sendDescription)\n        .catch(this.handleError); // An error occurred, so handle the failure to connect\n    }\n     // configurar la conexión entre pares\n     // este es uno de los servidores STUN públicos de Google\n     // asegúrese de que su función de oferta / respuesta no cambie si el usuario A hace un SLD\n     // con type = offer inicialmente, debe hacerlo durante toda la sesión\n    this.pc = new RTCPeerConnection({iceServers: [{url: 'stun:stun.l.google.com:19302'}]});\n    // cuando su navegador obtenga un candidato, envíelo al par\n    this.pc.onicecandidate = e => {\n        console.log(e, 'onicecandidate');\n        if (e.candidate) {\n            this.props.socket.send({\n                type: 'candidate',\n                mlineindex: e.candidate.sdpMLineIndex,\n                candidate: e.candidate.candidate\n            });\n        }\n    };\n    // cuando el otro lado agregó un flujo multimedia, muéstrelo en la pantalla\n    this.pc.onaddstream = e => {\n        console.log('onaddstream', e) \n        this.remoteStream = e.stream;\n        this.remoteVideo.srcObject = this.remoteStream = e.stream;\n        this.setState({bridge: 'established'});\n    };\n    this.pc.ondatachannel = e => {\n        // data channel\n        this.dc = e.channel;\n        this.setupDataHandlers();\n        this.sendData({\n          peerMediaStream: {\n            video: this.localStream.getVideoTracks()[0].enabled\n          }\n        });\n        //sendData('hello');\n    };\n    // attach local media to the peer connection\n    this.localStream.getTracks().forEach(track => this.pc.addTrack(track, this.localStream));\n    // call if we were the last to connect (to increase\n    // chances that everything is set up properly at both ends)\n    if (this.state.user === 'host') {\n      this.props.getUserMedia.then(attachMediaIfReady);\n    }  \n  }\n  render(){\n    return (\n      <div className={`media-bridge ${this.state.bridge}`}>\n        <video className=\"remote-video\" ref={(ref) => this.remoteVideo = ref} autoPlay></video>\n        <video className=\"local-video\" ref={(ref) => this.localVideo = ref} autoPlay muted></video>\n      </div>\n    );\n  }\n}\nMediaBridge.propTypes = {\n  socket: PropTypes.object.isRequired,\n  getUserMedia: PropTypes.object.isRequired,\n  media: PropTypes.func.isRequired\n}\nexport default MediaBridge;","const el = document.documentElement;\ndocument.fullscreenEnabled = document.fullscreenEnabled ||\ndocument.webkitFullscreenEnabled ||\ndocument.mozFullScreenEnabled ||\ndocument.msFullscreenEnabled;\ndocument.exitFullscreen = document.exitFullscreen ||\ndocument.webkitExitFullscreen ||\ndocument.mozCancelFullScreen ||\ndocument.msExitFullscreen;\nel.requestFullscreen = el.requestFullscreen ||\nel.webkitRequestFullscreen ||\nel.mozRequestFullScreen ||\nel.msRequestFullScreen;\nconst ToggleFullScreen = () => {\n  if (document.fullscreenEnabled) {\n    document.fullscreenElement ||\n    document.webkitFullscreenElement ||\n    document.mozFullScreenElement ||\n    document.msFullscreenElement ? document.exitFullscreen() : el.requestFullscreen();\n  }\n};\nexport default ToggleFullScreen;\n","import React from 'react';\nimport { PropTypes } from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport ToggleFullScreen from './ToggleFullScreen';\n\nconst Communication = props =>\n  <div className=\"auth\">\n    <div className=\"media-controls\">\n      <Link className=\"call-exit-button\" to=\"/\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 36 36\"  className=\"svg\">\n          <path d=\"M30 16.5h-18.26l8.38-8.38-2.12-2.12-12 12 12 12 2.12-2.12-8.38-8.38h18.26v-3z\" fill=\"white\"/>\n        </svg>\n      </Link>\n      <button onClick={props.toggleAudio} className={'audio-button-' + props.audio}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" className=\"svg\">\n          <path className=\"on\" d=\"M38 22h-3.4c0 1.49-.31 2.87-.87 4.1l2.46 2.46C37.33 26.61 38 24.38 38 22zm-8.03.33c0-.11.03-.22.03-.33V10c0-3.32-2.69-6-6-6s-6 2.68-6 6v.37l11.97 11.96zM8.55 6L6 8.55l12.02 12.02v1.44c0 3.31 2.67 6 5.98 6 .45 0 .88-.06 1.3-.15l3.32 3.32c-1.43.66-3 1.03-4.62 1.03-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c1.81-.27 3.53-.9 5.08-1.81L39.45 42 42 39.46 8.55 6z\" fill=\"white\"></path>\n          <path className=\"off\" d=\"M24 28c3.31 0 5.98-2.69 5.98-6L30 10c0-3.32-2.68-6-6-6-3.31 0-6 2.68-6 6v12c0 3.31 2.69 6 6 6zm10.6-6c0 6-5.07 10.2-10.6 10.2-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c6.56-.97 12-6.61 12-13.44h-3.4z\" fill=\"white\"></path>\n        </svg>\n      </button>\n      <button onClick={props.toggleVideo} className={'video-button-' + props.video}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" className=\"svg\">\n          <path className=\"on\" d=\"M40 8H15.64l8 8H28v4.36l1.13 1.13L36 16v12.36l7.97 7.97L44 36V12c0-2.21-1.79-4-4-4zM4.55 2L2 4.55l4.01 4.01C4.81 9.24 4 10.52 4 12v24c0 2.21 1.79 4 4 4h29.45l4 4L44 41.46 4.55 2zM12 16h1.45L28 30.55V32H12V16z\" fill=\"white\"></path>\n          <path className=\"off\" d=\"M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm-4 24l-8-6.4V32H12V16h16v6.4l8-6.4v16z\" fill=\"white\"></path>\n        </svg>\n      </button>\n      <button onClick={ToggleFullScreen} className=\"fullscreen-button\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" className=\"svg\">\n          <path className=\"on\" d=\"M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z\" fill=\"white\"></path>\n          <path className=\"off\" d=\"M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z\" fill=\"white\"></path>\n        </svg>\n      </button>\n      <button onClick={props.handleHangup} className=\"hangup-button\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" className=\"svg\">\n          <path d=\"M24 18c-3.21 0-6.3.5-9.2 1.44v6.21c0 .79-.46 1.47-1.12 1.8-1.95.98-3.74 2.23-5.33 3.7-.36.35-.85.57-1.4.57-.55 0-1.05-.22-1.41-.59L.59 26.18c-.37-.37-.59-.87-.59-1.42 0-.55.22-1.05.59-1.42C6.68 17.55 14.93 14 24 14s17.32 3.55 23.41 9.34c.37.36.59.87.59 1.42 0 .55-.22 1.05-.59 1.41l-4.95 4.95c-.36.36-.86.59-1.41.59-.54 0-1.04-.22-1.4-.57-1.59-1.47-3.38-2.72-5.33-3.7-.66-.33-1.12-1.01-1.12-1.8v-6.21C30.3 18.5 27.21 18 24 18z\" fill=\"white\"></path>\n        </svg>\n      </button>\n    </div>\n    <div className=\"request-access\">\n      <p><span className=\"you-left\">Has colgado.&nbsp;</span>Envíe una invitación para unirse a la sala.</p>\n      <form onSubmit={props.send}>\n        <input type=\"text\" autoFocus onChange={props.handleInput} data-ref=\"message\"  maxLength=\"30\" required placeholder=\"Hola, soy Thony\" />\n        <button className=\"primary-button\">Enviar</button>\n      </form>\n    </div>\n    <div className=\"grant-access\">\n      <p>Un compañero te ha enviado un mensaje para que te unas a la sala:</p>\n      <div>{props.message}</div>\n      <button onClick={props.handleInvitation} data-ref=\"reject\" className=\"primary-button\">Rechazar</button>\n      <button onClick={props.handleInvitation} data-ref=\"accept\" className=\"primary-button\">Aceptar</button>\n    </div>\n    <div className=\"room-occupied\">\n      <p>¡Prueba en otra habitación!</p>\n      <Link  className=\"primary-button\" to=\"/\">OK</Link>\n    </div>\n    <div className=\"waiting\">\n      <p><span>Esperando a que alguien se una a esta sala:&nbsp;</span><a href={window.location.href}>{window.location.href}</a><br/>\n      <span className=\"remote-left\">Tu colega ha colgado.</span></p>\n    </div>\n  </div>\n\nCommunication.propTypes = {\n  message: PropTypes.string.isRequired,\n  audio: PropTypes.bool.isRequired,\n  video: PropTypes.bool.isRequired,\n  toggleVideo: PropTypes.func.isRequired,\n  toggleAudio: PropTypes.func.isRequired,\n  getContent: PropTypes.func.isRequired,\n  send: PropTypes.func.isRequired,\n  handleHangup: PropTypes.func.isRequired,\n  handleInput: PropTypes.func.isRequired,\n  handleInvitation: PropTypes.func.isRequired\n};\n\nexport default Communication;\n","import React from 'react'\nimport { PropTypes } from 'prop-types';\nimport MediaContainer from './MediaContainer'\nimport Communication from '../components/Communication'\nimport store from '../store'\nimport { connect } from 'react-redux'\n\nclass CommunicationContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sid: '',\n      message: '',\n      audio: true,\n      video: true\n    };\n    this.handleInvitation = this.handleInvitation.bind(this);\n    this.handleHangup = this.handleHangup.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n    this.toggleVideo = this.toggleVideo.bind(this);\n    this.toggleAudio = this.toggleAudio.bind(this);\n    this.send = this.send.bind(this);\n  }\n  hideAuth() {\n    this.props.media.setState({bridge: 'connecting'});\n  } \n  full() {\n    this.props.media.setState({bridge: 'full'});\n  }\n  componentDidMount() {\n    const socket = this.props.socket;\n    console.log('props', this.props)\n    this.setState({video: this.props.video, audio: this.props.audio});\n\n    socket.on('create', () =>\n      this.props.media.setState({user: 'host', bridge: 'create'}));\n    socket.on('full', this.full);\n    socket.on('bridge', role => this.props.media.init());\n    socket.on('join', () =>\n      this.props.media.setState({user: 'guest', bridge: 'join'}));\n    socket.on('approve', ({ message, sid }) => {\n      this.props.media.setState({bridge: 'approve'});\n      this.setState({ message, sid });\n    });\n    socket.emit('find');\n    this.props.getUserMedia\n      .then(stream => {\n          this.localStream = stream;\n          this.localStream.getVideoTracks()[0].enabled = this.state.video;\n          this.localStream.getAudioTracks()[0].enabled = this.state.audio;\n        });\n  }\n  handleInput(e) {\n    this.setState({[e.target.dataset.ref]: e.target.value});\n  }\n  send(e) {\n    e.preventDefault();\n    this.props.socket.emit('auth', this.state);\n    this.hideAuth();\n  }\n  handleInvitation(e) {\n    e.preventDefault();\n    this.props.socket.emit([e.target.dataset.ref], this.state.sid);\n    this.hideAuth();\n  }\n  toggleVideo() {\n    const video = this.localStream.getVideoTracks()[0].enabled = !this.state.video;\n    this.setState({video: video});\n    this.props.setVideo(video);\n  }\n  toggleAudio() {\n    const audio = this.localStream.getAudioTracks()[0].enabled = !this.state.audio;\n    this.setState({audio: audio});\n    this.props.setAudio(audio);\n  }\n  handleHangup() {\n    this.props.media.hangup();\n  }\n  render(){\n    return (\n      <Communication\n        {...this.state}\n        toggleVideo={this.toggleVideo}\n        toggleAudio={this.toggleAudio}\n        send={this.send}\n        handleHangup={this.handleHangup}\n        handleInput={this.handleInput}\n        handleInvitation={this.handleInvitation} />\n    );\n  }\n}\nconst mapStateToProps = store => ({video: store.video, audio: store.audio});\nconst mapDispatchToProps = dispatch => (\n  {\n    setVideo: boo => store.dispatch({type: 'SET_VIDEO', video: boo}),\n    setAudio: boo => store.dispatch({type: 'SET_AUDIO', audio: boo})\n  }\n);\n\nCommunicationContainer.propTypes = {\n  socket: PropTypes.object.isRequired,\n  getUserMedia: PropTypes.object.isRequired,\n  audio: PropTypes.bool.isRequired,\n  video: PropTypes.bool.isRequired,\n  setVideo: PropTypes.func.isRequired,\n  setAudio: PropTypes.func.isRequired,\n  media: PropTypes.instanceOf(MediaContainer)\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(CommunicationContainer);","import React, { Component } from 'react';\nimport MediaContainer from './MediaContainer'\nimport CommunicationContainer from './CommunicationContainer'\nimport { connect } from 'react-redux'\nimport store from '../store'\nimport io from 'socket.io-client'\n\nclass RoomPage extends Component {\n  constructor(props) {\n    super(props);\n    this.getUserMedia = navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: true\n    }).catch(e => alert('getUserMedia() error: ' + e.name))\n    this.socket = io.connect();\n  }\n  componentDidMount() {\n    this.props.addRoom();\n  }\n  render(){\n    return (\n      <div>\n        <MediaContainer media={media => this.media = media} socket={this.socket} getUserMedia={this.getUserMedia} />\n        <CommunicationContainer socket={this.socket} media={this.media} getUserMedia={this.getUserMedia} />\n      </div>\n    );\n  }\n}\nconst mapStateToProps = store => ({rooms: new Set([...store.rooms])});\nconst mapDispatchToProps = (dispatch, ownProps) => (\n    {\n      addRoom: () => store.dispatch({ type: 'ADD_ROOM', room: ownProps.match.params.room })\n    }\n  );\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomPage);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport Home from './containers/HomePage';\nimport Room from './containers/RoomPage';\nimport NotFound from './components/NotFound';\nimport * as serviceWorker from './serviceWorker';\nimport styles from './App.css';\n\nrender(\n  <Provider store={store}>\n    <BrowserRouter>\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route path=\"/r/:room\" component={Room} />\n        <Route path=\"*\" component={NotFound} />\n      </Switch>\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default () => (\n    <div class=\"container user_card mt-5\">\n        <div class=\"row\">\n            <div class=\"col-md-12 text-center\">\n                <div class=\"error-template\">\n                    <h1>\n                        Lo sentimos!</h1>\n                    <h2>\n                        404 Pagina no encontrada</h2>\n                    <div class=\"error-details\">\n                        Por favor vuelva al inicio del sitio\n                </div>\n                    <Link className=\"btn btn-primary text-center mt-4\" to=\"/\">\n                        Inicio\n                    </Link>\n                </div>\n            </div>\n        </div>\n    </div>\n);\n","module.exports = __webpack_public_path__ + \"static/media/videollamada.dc2a00d9.webp\";"],"sourceRoot":""}